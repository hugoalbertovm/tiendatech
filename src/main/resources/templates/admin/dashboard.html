<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Dashboard | TiendaTech</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
        <link rel="stylesheet" th:href="@{/css/dashboard.css}" />
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </head>
    <body>

        <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
            <div class="container-fluid">
                <a class="navbar-brand fw-bold" href="/admin/dashboard">TiendaTech Admin</a>
                <div class="text-white">Dashboard</div>
            </div>
        </nav>

        <div class="container-fluid">
            <div class="row">
                <div class="col-md-2 sidebar bg-light p-3">
                    <ul class="nav flex-column">
                        <li class="nav-item"><a class="nav-link active" href="/admin/dashboard"><i class="bi bi-bar-chart-fill"></i> Dashboard</a></li>
                        <li class="nav-item"><a class="nav-link" th:href="@{/admin/inicio}"><i class="bi bi-house-door-fill"></i> Inicio</a></li>
                        <li class="nav-item"><a class="nav-link" th:href="@{/admin/categorias}"><i class="bi bi-box-seam-fill"></i> Categorías</a></li>
                        <li class="nav-item"><a class="nav-link" th:href="@{/admin/productos}"><i class="bi bi-laptop-fill"></i> Productos</a></li>
                        <li class="nav-item"><a class="nav-link" th:href="@{/admin/ofertas}"><i class="bi bi-tags-fill"></i> Ofertas</a></li>
                        <li class="nav-item"><a class="nav-link" th:href="@{/admin/carrito}"><i class="bi bi-cart-fill"></i> Carrito</a></li>
                        <li class="nav-item"><a class="nav-link" th:href="@{/admin/acerca}"><i class="bi bi-info-circle-fill"></i> Acerca</a></li>
                        <li class="nav-item"><a class="nav-link" th:href="@{/admin/faq}"><i class="bi bi-question-circle-fill"></i> FAQ</a></li>
                        <li class="nav-item"><a class="nav-link" th:href="@{/admin/contacto}"><i class="bi bi-envelope-fill"></i> Contacto</a></li>
                        <li class="nav-item"><a class="nav-link text-danger" th:href="@{/admin/logout}"><i class="bi bi-box-arrow-right"></i> Salir</a></li>
                    </ul>
                </div>

                <div class="col-md-10 p-4">
                    <h2 class="mb-4">Resumen general</h2>

                    <div class="row g-4 mb-4">
                        <div class="col-md-3">
                            <div class="card text-center shadow-sm">
                                <div class="card-body">
                                    <h5 class="card-title">Productos</h5>
                                    <p class="display-6 fw-bold text-primary" th:text="${productosCount}">0</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="card text-center shadow-sm">
                                <div class="card-body">
                                    <h5 class="card-title">Clientes</h5>
                                    <p class="display-6 fw-bold text-success" th:text="${clientesCount}">0</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="card text-center shadow-sm">
                                <div class="card-body">
                                    <h5 class="card-title">Ventas</h5>
                                    <p class="display-6 fw-bold text-warning" th:text="${ventasCount}">0</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="card text-center shadow-sm">
                                <div class="card-body">
                                    <h5 class="card-title">Ingresos</h5>
                                    <p class="display-6 fw-bold text-danger" th:text="${ingresos}">₡0</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title">Resumen de Ventas</h5>
                            <canvas id="ventasChart" height="100"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            const ctx = document.getElementById('ventasChart').getContext('2d');
            const ventasChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'],
                    datasets: [{
                            label: 'Ventas',
                            data: [5000, 7000, 8000, 6000, 9000, 10000],
                            backgroundColor: [
                                'rgba(13, 110, 253, 0.6)',
                                'rgba(25, 135, 84, 0.6)',
                                'rgba(255, 193, 7, 0.6)',
                                'rgba(220, 53, 69, 0.6)',
                                'rgba(108, 117, 125, 0.6)',
                                'rgba(13, 202, 240, 0.6)'
                            ],
                            borderColor: '#fff',
                            borderWidth: 1
                        }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 2000
                            }
                        }
                    }
                }
            });
        </script>

    </body>
</html>
